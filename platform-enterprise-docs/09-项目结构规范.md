# Platform Enterprise - 项目结构规范

> 代码组织与命名规范

## 1. 后端项目结构

### 1.1 Maven 多模块结构

```
platform-enterprise/
├── pom.xml                              # 父 POM
│
├── platform-common/                     # 通用模块
│   ├── platform-common-core/           # 核心工具
│   ├── platform-common-web/            # Web 通用
│   ├── platform-common-security/       # 安全通用
│   ├── platform-common-data/           # 数据访问通用
│   └── platform-common-test/           # 测试工具
│
├── platform-api/                        # API 定义模块
│   ├── platform-api-user/              # 用户服务 API
│   ├── platform-api-auth/              # 认证服务 API
│   └── platform-api-business/          # 业务服务 API
│
├── platform-gateway/                    # API 网关
│   ├── src/main/java/
│   ├── src/main/resources/
│   └── pom.xml
│
├── platform-auth/                       # 认证服务
│   ├── src/main/java/
│   ├── src/main/resources/
│   └── pom.xml
│
├── platform-user/                       # 用户服务
│   ├── src/main/java/
│   │   └── com/company/platform/user/
│   │       ├── UserApplication.java
│   │       ├── config/
│   │       ├── controller/
│   │       ├── service/
│   │       ├── repository/
│   │       ├── entity/
│   │       ├── dto/
│   │       ├── mapper/
│   │       └── exception/
│   ├── src/main/resources/
│   │   ├── application.yml
│   │   ├── application-dev.yml
│   │   ├── application-prod.yml
│   │   └── db/migration/               # Flyway 迁移脚本
│   ├── src/test/java/
│   └── pom.xml
│
├── platform-business/                   # 业务服务
├── platform-file/                       # 文件服务
├── platform-message/                    # 消息服务
├── platform-job/                        # 任务服务
└── platform-monitor/                    # 监控服务
```

### 1.2 单服务内部结构

```
platform-user/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/company/platform/user/
│   │   │       │
│   │   │       ├── UserApplication.java          # 启动类
│   │   │       │
│   │   │       ├── config/                       # 配置类
│   │   │       │   ├── SecurityConfig.java
│   │   │       │   ├── SwaggerConfig.java
│   │   │       │   └── WebMvcConfig.java
│   │   │       │
│   │   │       ├── controller/                   # 控制器层
│   │   │       │   ├── UserController.java
│   │   │       │   ├── RoleController.java
│   │   │       │   └── DepartmentController.java
│   │   │       │
│   │   │       ├── service/                      # 服务层
│   │   │       │   ├── UserService.java
│   │   │       │   ├── impl/
│   │   │       │   │   └── UserServiceImpl.java
│   │   │       │   └── adapter/                  # 外部服务适配器
│   │   │       │       └── AuthServiceAdapter.java
│   │   │       │
│   │   │       ├── repository/                   # 数据访问层
│   │   │       │   ├── UserRepository.java
│   │   │       │   └── RoleRepository.java
│   │   │       │
│   │   │       ├── entity/                       # 实体类
│   │   │       │   ├── User.java
│   │   │       │   ├── Role.java
│   │   │       │   └── base/
│   │   │       │       └── BaseEntity.java
│   │   │       │
│   │   │       ├── dto/                          # 数据传输对象
│   │   │       │   ├── request/
│   │   │       │   │   ├── CreateUserRequest.java
│   │   │       │   │   └── UpdateUserRequest.java
│   │   │       │   ├── response/
│   │   │       │   │   └── UserDTO.java
│   │   │       │   └── query/
│   │   │       │       └── UserQueryRequest.java
│   │   │       │
│   │   │       ├── mapper/                       # 对象映射
│   │   │       │   └── UserMapper.java
│   │   │       │
│   │   │       ├── exception/                    # 异常类
│   │   │       │   ├── UserNotFoundException.java
│   │   │       │   └── UserAlreadyExistsException.java
│   │   │       │
│   │   │       ├── event/                        # 领域事件
│   │   │       │   ├── UserCreatedEvent.java
│   │   │       │   └── UserEventListener.java
│   │   │       │
│   │   │       └── util/                         # 工具类
│   │   │           └── PasswordUtils.java
│   │   │
│   │   └── resources/
│   │       ├── application.yml
│   │       ├── application-dev.yml
│   │       ├── application-test.yml
│   │       ├── application-prod.yml
│   │       ├── logback-spring.xml
│   │       └── db/
│   │           └── migration/
│   │               ├── V1__create_user_table.sql
│   │               └── V2__add_role_table.sql
│   │
│   └── test/
│       ├── java/
│       │   └── com/company/platform/user/
│       │       ├── controller/
│       │       │   └── UserControllerTest.java
│       │       ├── service/
│       │       │   └── UserServiceTest.java
│       │       └── repository/
│       │           └── UserRepositoryTest.java
│       └── resources/
│           └── application-test.yml
│
├── Dockerfile
└── pom.xml
```

## 2. 前端项目结构

### 2.1 Vue 3 项目结构

```
platform-ui/
├── public/
│   ├── favicon.ico
│   └── manifest.json
│
├── src/
│   ├── api/                             # API 层
│   │   ├── modules/                    # 按模块划分
│   │   │   ├── auth.ts                # 认证 API
│   │   │   ├── user.ts                # 用户 API
│   │   │   ├── role.ts                # 角色 API
│   │   │   └── index.ts               # 模块导出
│   │   ├── request.ts                 # Axios 封装
│   │   └── index.ts                   # 统一导出
│   │
│   ├── assets/                          # 静态资源
│   │   ├── images/                    # 图片
│   │   ├── icons/                     # 图标
│   │   │   └── svg/                   # SVG 图标
│   │   └── styles/                    # 样式
│   │       ├── variables.css         # CSS 变量
│   │       ├── reset.css             # 重置样式
│   │       ├── transition.css        # 过渡动画
│   │       └── index.css             # 入口样式
│   │
│   ├── components/                      # 组件
│   │   ├── base/                      # 基础组件
│   │   │   ├── BaseButton.vue
│   │   │   ├── BaseInput.vue
│   │   │   ├── BaseTable.vue
│   │   │   ├── BaseModal.vue
│   │   │   ├── BasePagination.vue
│   │   │   └── index.ts
│   │   ├── business/                  # 业务组件
│   │   │   ├── UserSelect.vue
│   │   │   ├── RoleSelect.vue
│   │   │   ├── DeptTree.vue
│   │   │   └── index.ts
│   │   ├── layout/                    # 布局组件
│   │   │   ├── AppHeader.vue
│   │   │   ├── AppSidebar.vue
│   │   │   ├── AppFooter.vue
│   │   │   ├── AppBreadcrumb.vue
│   │   │   └── AppTabs.vue
│   │   └── common/                    # 通用组件
│   │       ├── SvgIcon.vue
│   │       ├── ThemeSwitch.vue
│   │       └── SearchBar.vue
│   │
│   ├── composables/                     # 组合式函数
│   │   ├── useAuth.ts                 # 认证相关
│   │   ├── useTable.ts                # 表格逻辑
│   │   ├── useForm.ts                 # 表单逻辑
│   │   ├── useModal.ts                # 弹窗逻辑
│   │   ├── usePermission.ts           # 权限逻辑
│   │   ├── useTheme.ts                # 主题逻辑
│   │   ├── useStorage.ts              # 存储逻辑
│   │   └── index.ts
│   │
│   ├── constants/                       # 常量
│   │   ├── api.ts                     # API 常量
│   │   ├── storage.ts                 # 存储 Key
│   │   ├── enums.ts                   # 枚举
│   │   └── regexp.ts                  # 正则表达式
│   │
│   ├── directives/                      # 自定义指令
│   │   ├── permission.ts              # 权限指令
│   │   ├── loading.ts                 # 加载指令
│   │   ├── debounce.ts                # 防抖指令
│   │   └── index.ts
│   │
│   ├── layouts/                         # 页面布局
│   │   ├── DefaultLayout.vue          # 默认布局
│   │   ├── BlankLayout.vue            # 空白布局
│   │   └── AuthLayout.vue             # 认证布局
│   │
│   ├── plugins/                         # 插件
│   │   ├── element-plus.ts            # Element Plus
│   │   ├── pinia.ts                   # Pinia
│   │   ├── router.ts                  # Router
│   │   └── index.ts
│   │
│   ├── router/                          # 路由
│   │   ├── routes/                    # 路由模块
│   │   │   ├── auth.ts
│   │   │   ├── dashboard.ts
│   │   │   ├── system.ts
│   │   │   └── index.ts
│   │   ├── guards.ts                  # 路由守卫
│   │   └── index.ts
│   │
│   ├── stores/                          # 状态管理
│   │   ├── modules/
│   │   │   ├── auth.ts                # 认证状态
│   │   │   ├── user.ts                # 用户状态
│   │   │   ├── app.ts                 # 应用状态
│   │   │   ├── permission.ts          # 权限状态
│   │   │   └── settings.ts            # 设置状态
│   │   └── index.ts
│   │
│   ├── types/                           # 类型定义
│   │   ├── api/                       # API 类型
│   │   │   ├── auth.d.ts
│   │   │   ├── user.d.ts
│   │   │   └── common.d.ts
│   │   ├── components.d.ts            # 组件类型
│   │   ├── global.d.ts                # 全局类型
│   │   ├── env.d.ts                   # 环境变量类型
│   │   └── index.d.ts
│   │
│   ├── utils/                           # 工具函数
│   │   ├── auth.ts                    # 认证工具
│   │   ├── storage.ts                 # 存储工具
│   │   ├── format.ts                  # 格式化
│   │   ├── validate.ts                # 验证
│   │   ├── tree.ts                    # 树形工具
│   │   └── index.ts
│   │
│   ├── views/                           # 页面视图
│   │   ├── auth/                      # 认证页面
│   │   │   ├── Login.vue
│   │   │   ├── Register.vue
│   │   │   └── ForgotPassword.vue
│   │   ├── dashboard/                 # 仪表盘
│   │   │   └── Index.vue
│   │   ├── system/                    # 系统管理
│   │   │   ├── user/
│   │   │   │   ├── Index.vue
│   │   │   │   └── components/
│   │   │   │       └── UserFormDialog.vue
│   │   │   ├── role/
│   │   │   │   ├── Index.vue
│   │   │   │   └── components/
│   │   │   │       └── RoleFormDialog.vue
│   │   │   └── menu/
│   │   │       └── Index.vue
│   │   ├── profile/                   # 个人中心
│   │   │   └── Index.vue
│   │   └── error/                     # 错误页面
│   │       ├── 403.vue
│   │       ├── 404.vue
│   │       └── 500.vue
│   │
│   ├── App.vue                          # 根组件
│   └── main.ts                          # 入口文件
│
├── .env                                 # 环境变量
├── .env.development
├── .env.production
├── .eslintrc.cjs                        # ESLint 配置
├── .prettierrc                          # Prettier 配置
├── components.d.ts                      # 组件类型声明
├── auto-imports.d.ts                    # 自动导入声明
├── index.html                           # HTML 模板
├── package.json
├── pnpm-lock.yaml
├── tsconfig.json                        # TypeScript 配置
├── tsconfig.node.json
├── tailwind.config.js                   # Tailwind 配置
├── vite.config.ts                       # Vite 配置
├── Dockerfile
└── nginx.conf
```

## 3. 命名规范

### 3.1 Java 命名规范

```java
// 包名: 全小写，点分隔
package com.company.platform.user.service.impl;

// 类名: PascalCase
public class UserServiceImpl implements UserService { }

// 接口名: PascalCase，不加 I 前缀
public interface UserService { }

// 抽象类: Abstract 前缀
public abstract class AbstractBaseService { }

// 异常类: Exception 后缀
public class UserNotFoundException extends RuntimeException { }

// 枚举: PascalCase，值全大写
public enum UserStatus {
    ACTIVE, INACTIVE, LOCKED, DISABLED
}

// 常量: 全大写，下划线分隔
public static final int MAX_RETRY_COUNT = 3;

// 方法名: camelCase，动词开头
public User findById(Long id) { }
public void deleteUser(Long id) { }
public boolean isActive() { }
public List<User> listUsers() { }

// 变量名: camelCase
private String userName;
private List<Role> userRoles;

// 泛型: 单个大写字母或描述性名称
public interface Repository<T, ID> { }
public class PageResponse<T> { }
```

### 3.2 TypeScript 命名规范

```typescript
// 接口: PascalCase，不加 I 前缀
interface User {
  id: number
  username: string
}

// 类型别名: PascalCase
type UserStatus = 'ACTIVE' | 'INACTIVE' | 'LOCKED'

// 枚举: PascalCase
enum UserRole {
  Admin = 'ADMIN',
  User = 'USER',
  Guest = 'GUEST'
}

// 函数: camelCase
function getUserById(id: number): Promise<User> { }

// 变量: camelCase
const currentUser = ref<User | null>(null)
let isLoading = false

// 常量: SCREAMING_SNAKE_CASE 或 camelCase
const MAX_PAGE_SIZE = 100
const apiBaseUrl = '/api/v1'

// 组合式函数: use 前缀
export function useAuth() { }
export function useTable<T>() { }

// 组件: PascalCase
// UserList.vue, BaseButton.vue

// Props/Emits: camelCase
interface Props {
  userId: number
  isReadonly?: boolean
}

const emit = defineEmits<{
  (e: 'update', user: User): void
  (e: 'delete', id: number): void
}>()
```

### 3.3 Vue 文件命名

```yaml
components:
  # 基础组件: Base 前缀
  - BaseButton.vue
  - BaseInput.vue
  - BaseTable.vue

  # 单例组件: The 前缀
  - TheHeader.vue
  - TheSidebar.vue
  - TheFooter.vue

  # 紧密耦合组件: 父组件名前缀
  - UserList.vue
  - UserListItem.vue
  - UserListFilters.vue

views:
  # 页面: Index.vue 或功能名
  - views/user/Index.vue
  - views/user/Detail.vue
  - views/user/Edit.vue

  # 页面内组件: 放在 components 子目录
  - views/user/components/UserFormDialog.vue
```

### 3.4 数据库命名

```sql
-- 表名: t_ 前缀，蛇形命名
CREATE TABLE t_user (...);
CREATE TABLE t_user_role (...);
CREATE TABLE t_sys_config (...);

-- 字段名: 蛇形命名
user_name, created_at, is_deleted

-- 主键: id
id BIGSERIAL PRIMARY KEY

-- 外键: 关联表名_id
user_id, role_id, dept_id

-- 索引名:
-- 主键: pk_表名
-- 唯一索引: uk_表名_字段
-- 普通索引: idx_表名_字段
-- 外键: fk_表名_关联表

CONSTRAINT pk_user PRIMARY KEY (id)
CONSTRAINT uk_user_username UNIQUE (username)
CREATE INDEX idx_user_status ON t_user(status)
CONSTRAINT fk_user_role_user FOREIGN KEY (user_id) REFERENCES t_user(id)
```

## 4. 代码风格

### 4.1 Java 代码风格

```java
// 类结构顺序
public class UserService {
    // 1. 静态常量
    private static final Logger log = LoggerFactory.getLogger(UserService.class);

    // 2. 静态变量
    private static int instanceCount;

    // 3. 实例变量 (按可见性排序)
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;

    // 4. 构造函数
    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }

    // 5. 公共方法
    public User findById(Long id) { }

    // 6. 受保护方法
    protected void validateUser(User user) { }

    // 7. 私有方法
    private String encodePassword(String password) { }

    // 8. 内部类
    private static class UserCacheKey { }
}

// Record 用于 DTO
public record UserDTO(
    Long id,
    String username,
    String email,
    LocalDateTime createdAt
) {}

// 使用 var 简化局部变量
var users = userRepository.findAll();
var result = new ArrayList<UserDTO>();
```

### 4.2 TypeScript 代码风格

```typescript
// 导入顺序
// 1. Vue 核心
import { ref, computed, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'

// 2. 第三方库
import { ElMessage } from 'element-plus'
import axios from 'axios'

// 3. 项目内部
import { useUserStore } from '@/stores/modules/user'
import { userApi } from '@/api/modules/user'
import type { User, CreateUserRequest } from '@/types'

// 4. 相对路径
import UserFormDialog from './components/UserFormDialog.vue'

// 组件结构顺序 (script setup)
<script setup lang="ts">
// 1. 类型导入
import type { Props, Emits } from './types'

// 2. Props & Emits
const props = defineProps<Props>()
const emit = defineEmits<Emits>()

// 3. Composables
const route = useRoute()
const userStore = useUserStore()

// 4. 响应式状态
const loading = ref(false)
const user = ref<User | null>(null)

// 5. 计算属性
const fullName = computed(() => `${user.value?.firstName} ${user.value?.lastName}`)

// 6. 监听器
watch(() => props.userId, fetchUser)

// 7. 生命周期
onMounted(() => fetchUser())

// 8. 方法
async function fetchUser() { }

// 9. 暴露
defineExpose({ refresh: fetchUser })
</script>
```

## 5. 提交规范

### 5.1 Commit Message 格式

```yaml
format: "<type>(<scope>): <subject>"

types:
  - feat:     新功能
  - fix:      Bug 修复
  - docs:     文档更新
  - style:    代码格式 (不影响代码运行)
  - refactor: 重构 (不是 bug 修复，也不是新功能)
  - perf:     性能优化
  - test:     测试相关
  - chore:    构建过程或辅助工具变动
  - ci:       CI 配置
  - revert:   回滚

scope:
  - 可选，表示影响范围
  - 如: user, auth, gateway, ui

subject:
  - 简短描述，不超过 50 字符
  - 使用动词开头: add, update, fix, remove
  - 不要以句号结尾

examples:
  - "feat(user): add user profile page"
  - "fix(auth): resolve token refresh issue"
  - "docs: update API documentation"
  - "refactor(gateway): optimize route matching"
  - "test(user): add unit tests for UserService"
```

### 5.2 分支命名

```yaml
branches:
  main:     生产分支
  develop:  开发分支
  feature:  功能分支 (feature/user-profile)
  bugfix:   Bug 修复分支 (bugfix/login-error)
  hotfix:   紧急修复分支 (hotfix/security-patch)
  release:  发布分支 (release/v1.2.0)

naming:
  pattern: "<type>/<description>"
  examples:
    - feature/user-registration
    - feature/JIRA-123-add-export
    - bugfix/fix-login-redirect
    - hotfix/security-vulnerability
```

---

**文档版本**: 1.0.0
**最后更新**: 2026-01-06
